include-file = ~/.config/polybar/colors.ini

[bar/main]
monitor = ${env:MONITOR:}
width = 99.55%
height = 24pt
offset-x = 0.3%
offset-y = 10
radius = 12
background = ${colors.background}
foreground = ${colors.foreground}
line-size = 3pt
padding-left = 1
padding-right = 1
module-margin = 1
font-0 = monospace:size=10;2
font-3 = monospace:size=10:weight=bold;2
font-1 = Symbols Nerd Font:size=18;2
font-2 = Noto Color Emoji:scale=10;2
modules-left = i3
modules-center = date
modules-right = mail screensaver keyboard pulseaudio memory cpu battery bluetooth network monitor
cursor-click = pointer
enable-ipc = true

[bar/main-primary]
inherit = bar/main
modules-right = mail screensaver keyboard pulseaudio memory cpu battery bluetooth network monitor tray

[module/i3]
type = internal/i3
pin-workspaces = true
show-urgent = true
strip-wsnumbers = true
format = <label-state> <label-mode>
label-focused = %index%
label-focused-background = ${colors.primary}
label-focused-foreground = ${colors.background}
label-focused-padding = 1
label-unfocused = %index%
label-unfocused-padding = 1
label-visible = %index%
label-visible-padding = 1
label-urgent = %index%
label-urgent-background = ${colors.alert}
label-urgent-padding = 1

[module/date]
type = internal/date
interval = 1
date = 󰃭 %d.%m.%Y %H:%M
label = %{T4}%date%%{T-}
format = %{A1:wezterm start --class floating-calendar -- ~/.local/bin/todo-calendar:}<label>%{A}

[module/pulseaudio]
type = internal/pulseaudio
format-volume = 󰕾 <label-volume>
format-muted = <label-muted>
label-muted = 󰖁
label-muted-foreground = ${colors.alert}
click-right = pavucontrol

[module/memory]
type = internal/memory
interval = 2
format = %{A1:wezterm start --class floating-btop -- btop:}󰍛 <label>%{A}
label = %percentage_used:2%%

[module/cpu]
type = internal/cpu
interval = 2
format = %{A1:wezterm start --class floating-btop -- btop:}󰻠 <label>%{A}
label = %percentage:2%%

[module/battery]
type = internal/battery
battery = BAT0
adapter = AC
full-at = 98
format-charging = 󰂄 <label-charging>
format-discharging = <ramp-capacity> <label-discharging>
format-full = <label-full>
label-full = 󰁹
label-full-foreground = ${colors.secondary}
ramp-capacity-0 = 󰂎
ramp-capacity-1 = 󰁺
ramp-capacity-2 = 󰁼
ramp-capacity-3 = 󰁾
ramp-capacity-4 = 󰂀
ramp-capacity-0-foreground = ${colors.alert}

[module/keyboard]
type = custom/script
exec = echo "󰌌 $(xkb-switch -p | tr 'a-z' 'A-Z')"
interval = 0.3

[module/mail]
type = custom/script
exec = ~/.config/polybar/scripts/mail-status.sh
interval = 60
click-left = wezterm start --class floating-mail -- aerc

[module/screensaver]
type = custom/ipc
hook-0 = ~/.config/polybar/scripts/screensaver-status.sh
initial = 1
click-left = ~/.config/i3/toggle-screensaver.sh

[module/bluetooth]
type = custom/script
exec = ~/.config/polybar/scripts/bluetooth-status.sh
interval = 3
click-left = blueman-manager

[module/network]
type = custom/script
exec = ~/.config/polybar/scripts/network-status.sh
interval = 3

[module/monitor]
type = custom/text
format = 󰍹
click-left = wezterm start --class floating-monitors -- ~/.config/i3/monitors.sh

[module/tray]
type = internal/tray
tray-padding = 2
tray-size = 16

[settings]
screenchange-reload = true
